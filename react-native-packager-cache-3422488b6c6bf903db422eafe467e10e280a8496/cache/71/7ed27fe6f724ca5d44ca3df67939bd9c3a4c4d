Object.defineProperty(exports, "__esModule", {
    value: true
});
var _jsxFileName = '/home/jarek/battleCraftSound/battleCraftMobile/App/components/tournamentManage/components/turnContent/Battle1x1.js';

var _react = require('react');

var _react2 = babelHelpers.interopRequireDefault(_react);

var _reactNative = require('react-native');

var _FontAwesome = require('@expo/vector-icons/FontAwesome');

var _FontAwesome2 = babelHelpers.interopRequireDefault(_FontAwesome);

var _MainStyles = require('../../../../Styles/UniversalStyles/MainStyles');

var _MainStyles2 = babelHelpers.interopRequireDefault(_MainStyles);

var _BattleStyle = require('../../../../Styles/BattlePanelStyles/BattleStyle');

var _BattleStyle2 = babelHelpers.interopRequireDefault(_BattleStyle);

var _BaseColours = require('../../../../main/consts/BaseColours');

var _BaseColours2 = babelHelpers.interopRequireDefault(_BaseColours);

var _ListColours = require('../../../../main/consts/ListColours');

var _ListColours2 = babelHelpers.interopRequireDefault(_ListColours);

var _index = require('../../../../redux/actions/index');

var _redux = require('redux');

var _reactRedux = require('react-redux');

var _serverName = require('../../../../main/consts/serverName');

var Battle = function (_Component) {
    babelHelpers.inherits(Battle, _Component);
    babelHelpers.createClass(Battle, [{
        key: 'showBattlePopup',
        value: function showBattlePopup() {
            if (!this.props.disabled) {
                this.props.showBattlePopup(babelHelpers.extends({ tourNumber: this.props.tourNumber, tableNumber: this.props.battleData.tableNumber }, this.props.battleData));
            }
        }
    }, {
        key: 'generateURL',
        value: function generateURL(username) {
            return username !== "" ? { uri: _serverName.serverName + '/get/user/avatar?username=' + username } : require('battleCraftMobile/img/questionAvatar.png');
        }
    }]);

    function Battle(props) {
        babelHelpers.classCallCheck(this, Battle);

        var _this = babelHelpers.possibleConstructorReturn(this, (Battle.__proto__ || Object.getPrototypeOf(Battle)).call(this, props));

        var dataSource = new _reactNative.ListView.DataSource({
            rowHasChanged: function rowHasChanged(r1, r2) {
                return r1 !== r2;
            }
        });

        _this.state = {
            dataSource: dataSource.cloneWithRows(['Placeholder'])
        };
        return _this;
    }

    babelHelpers.createClass(Battle, [{
        key: 'getVSIcon',
        value: function getVSIcon() {
            return this.props.battleData.finished ? require('battleCraftMobile/img/vsIconFinished.png') : require('battleCraftMobile/img/vsIcon.png');
        }
    }, {
        key: 'renderBattle',
        value: function renderBattle(dimensions) {
            var _this2 = this;

            var scoreBackground = void 0;
            if (this.props.battleData.firstPlayer.points === this.props.battleData.secondPlayer.points) {
                scoreBackground = { P1: _ListColours2.default.battle.DRAW, P2: _ListColours2.default.battle.DRAW };
            } else if (this.props.battleData.firstPlayer.points > this.props.battleData.secondPlayer.points) {
                scoreBackground = { P1: _ListColours2.default.battle.WIN, P2: _ListColours2.default.battle.LOSE };
            } else scoreBackground = { P1: _ListColours2.default.battle.LOSE, P2: _ListColours2.default.battle.WIN };

            return _react2.default.createElement(
                _reactNative.View,
                { style: [_BattleStyle2.default.battleWindow, { width: this.props.dimension.width * 0.95, maxWidth: 600 }], __source: {
                        fileName: _jsxFileName,
                        lineNumber: 67
                    }
                },
                _react2.default.createElement(
                    _reactNative.View,
                    { style: [_BattleStyle2.default.playerHeader, _MainStyles2.default.borderStyle], __source: {
                            fileName: _jsxFileName,
                            lineNumber: 68
                        }
                    },
                    _react2.default.createElement(_FontAwesome2.default, { style: { padding: 3 }, name: "bookmark", size: 24, color: _BaseColours2.default.misc.greyBlue, __source: {
                            fileName: _jsxFileName,
                            lineNumber: 69
                        }
                    }),
                    _react2.default.createElement(
                        _reactNative.Text,
                        { numberOfLines: 1, style: [_BattleStyle2.default.player1Text, _MainStyles2.default.smallWhiteStyle], __source: {
                                fileName: _jsxFileName,
                                lineNumber: 70
                            }
                        },
                        this.props.battleData.firstPlayer.name,
                        ' '
                    )
                ),
                _react2.default.createElement(
                    _reactNative.View,
                    { style: _BattleStyle2.default.scoreRow, __source: {
                            fileName: _jsxFileName,
                            lineNumber: 72
                        }
                    },
                    _react2.default.createElement(
                        _reactNative.View,
                        { style: [_BattleStyle2.default.avatarContainer, { backgroundColor: _BaseColours2.default.misc.greyBlue, height: dimensions.window, width: dimensions.window }], __source: {
                                fileName: _jsxFileName,
                                lineNumber: 73
                            }
                        },
                        _react2.default.createElement(_reactNative.Image, { style: [_BattleStyle2.default.avatarSize, { height: dimensions.avatar, width: dimensions.avatar }], source: this.generateURL(this.props.battleData.firstPlayer.name), __source: {
                                fileName: _jsxFileName,
                                lineNumber: 74
                            }
                        })
                    ),
                    _react2.default.createElement(
                        _reactNative.TouchableHighlight,
                        { style: { flex: 1, height: dimensions.window }, onPress: function onPress() {
                                _this2.showBattlePopup();
                            }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 76
                            }
                        },
                        _react2.default.createElement(
                            _reactNative.View,
                            { style: [_BattleStyle2.default.scoreContainer], __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 77
                                }
                            },
                            _react2.default.createElement(
                                _reactNative.View,
                                { style: [_BattleStyle2.default.scoreboard, _MainStyles2.default.borderStyle, { width: dimensions.scoreSize, height: dimensions.scoreSize, backgroundColor: scoreBackground.P1 }], __source: {
                                        fileName: _jsxFileName,
                                        lineNumber: 78
                                    }
                                },
                                _react2.default.createElement(
                                    _reactNative.Text,
                                    { numberOfLines: 1, style: [_MainStyles2.default.textStyle, { fontSize: dimensions.fontSize }], __source: {
                                            fileName: _jsxFileName,
                                            lineNumber: 79
                                        }
                                    },
                                    this.props.battleData.firstPlayer.points
                                )
                            ),
                            _react2.default.createElement(_reactNative.Image, { style: _BattleStyle2.default.iconVS, source: this.getVSIcon(), __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 81
                                }
                            }),
                            _react2.default.createElement(
                                _reactNative.View,
                                { style: [_BattleStyle2.default.scoreboard, _MainStyles2.default.borderStyle, { width: dimensions.scoreSize, height: dimensions.scoreSize, backgroundColor: scoreBackground.P2 }], __source: {
                                        fileName: _jsxFileName,
                                        lineNumber: 82
                                    }
                                },
                                _react2.default.createElement(
                                    _reactNative.Text,
                                    { numberOfLines: 1, style: [_MainStyles2.default.textStyle, { fontSize: dimensions.fontSize }], __source: {
                                            fileName: _jsxFileName,
                                            lineNumber: 83
                                        }
                                    },
                                    this.props.battleData.secondPlayer.points
                                )
                            )
                        )
                    ),
                    _react2.default.createElement(
                        _reactNative.View,
                        { style: [_BattleStyle2.default.avatarContainer, { backgroundColor: _BaseColours2.default.misc.deepRed, height: dimensions.window, width: dimensions.window }], __source: {
                                fileName: _jsxFileName,
                                lineNumber: 87
                            }
                        },
                        _react2.default.createElement(_reactNative.Image, { style: [_BattleStyle2.default.avatarSize, { height: dimensions.avatar, width: dimensions.avatar }], source: this.generateURL(this.props.battleData.secondPlayer.name), __source: {
                                fileName: _jsxFileName,
                                lineNumber: 88
                            }
                        })
                    )
                ),
                _react2.default.createElement(
                    _reactNative.View,
                    { style: [_BattleStyle2.default.playerHeader, _MainStyles2.default.borderStyle], __source: {
                            fileName: _jsxFileName,
                            lineNumber: 91
                        }
                    },
                    _react2.default.createElement(
                        _reactNative.Text,
                        { numberOfLines: 1, style: [_BattleStyle2.default.player2Text, _MainStyles2.default.smallWhiteStyle], __source: {
                                fileName: _jsxFileName,
                                lineNumber: 92
                            }
                        },
                        this.props.battleData.secondPlayer.name
                    ),
                    _react2.default.createElement(_FontAwesome2.default, { style: { padding: 3 }, name: "bookmark", size: 24, color: _BaseColours2.default.misc.deepRed, __source: {
                            fileName: _jsxFileName,
                            lineNumber: 93
                        }
                    })
                )
            );
        }
    }, {
        key: 'render',
        value: function render() {
            var dimensions = void 0;
            if (this.props.dimension.width >= 450) {
                dimensions = { scoreSize: 60, fontSize: 32, window: 120, avatar: 110 };
            } else {
                dimensions = { scoreSize: 40, fontSize: 20, window: 80, avatar: 70 };
            }
            return _react2.default.createElement(
                _reactNative.View,
                {
                    __source: {
                        fileName: _jsxFileName,
                        lineNumber: 108
                    }
                },
                this.renderBattle(dimensions)
            );
        }
    }]);
    return Battle;
}(_react.Component);

function mapDispatchToProps(dispatch) {
    return (0, _redux.bindActionCreators)(_index.ActionCreators, dispatch);
}

function mapStateToProps(state) {
    return {
        dimension: state.dimension
    };
}

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Battle);